import{T as f,m as le,k as H,o as be,t as _e,v as Ve,f as he,b as Ae,R as Te,g as we,u as Ie,p as xe,w as Pe,x as Ee,i as De,L as Le,j as Ne,a as w,y as se,l as Be}from"./index-CtsO-uAQ.js";import{l as R,e as T,o as V,v as A,L as o,aL as E,A as g,aM as z,y as k,aN as Re,r as I,ac as J,g as D,m as F,U as Fe,h as L,i as l,p as O,b as W,Q as $,F as j,D as Oe,c as Me,d as Ue,G as qe,a3 as Q,a4 as ze,X as N,aO as oe,at as re,ah as ue,n as ie,q as _,af as ee,z as B,R as He,ab as $e,Z as je,ad as Ke,M as Ye,K as Ge}from"./index-Ckrw3-q5.js";import{_ as de}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{c as ae,T as Je,p as Qe}from"./VGrid-D8kP3cct.js";import{c as ce,V as te,f as We,e as me,m as Xe,a as Ze,u as ea,d as ne}from"./VOverlay-5ioH_70h.js";import{V as K,m as aa,a as ta,b as na,c as la,d as sa,e as oa}from"./VIcon-DFXnFQYq.js";const ra=ce("v-spacer","div","VSpacer"),ua={class:"timer"},ia=R({__name:"Timer",props:{value:{default:0},showDays:{type:Boolean,default:!1},showHours:{type:Boolean,default:!0},showMinutes:{type:Boolean,default:!0}},setup(e){const t=e,a=T(()=>{const u=10*f.SECOND,r=t.value?t.value/f.DAY|0:0,s=t.value?t.value%f.DAY/f.HOUR|0:0,d=t.value?t.value%f.HOUR/f.MINUTE|0:0,c=t.value?t.value%f.MINUTE/f.SECOND|0:0,S=t.value&&t.value<u?t.value%f.SECOND/100|0:0;return{dd:r.toLocaleString(void 0,{style:"unit",unitDisplay:"narrow",unit:"day"}),hh:s.toString().padStart(2,"0"),mm:d.toString().padStart(2,"0"),ss:c.toString().padStart(2,"0"),ms:S.toString()}});function n(u,r){return u<r?"fade-effect":"unfade-effect"}return(u,r)=>(V(),A("div",ua,[u.showDays||t.value>=o(f).DAY?(V(),A("span",{key:0,class:E(n(t.value,o(f).DAY))},g(o(a).dd)+"Â ",3)):z("",!0),u.showHours||t.value>=o(f).HOUR?(V(),A("span",{key:1,class:E(n(t.value,o(f).HOUR))},g(o(a).hh)+":",3)):z("",!0),u.showMinutes||t.value>=o(f).MINUTE?(V(),A("span",{key:2,class:E(n(t.value,10*o(f).SECOND))},g(o(a).mm)+":",3)):z("",!0),k("span",{class:E(n(t.value,10*o(f).SECOND))},g(o(a).ss[0]),3),k("span",null,g(o(a).ss[1]),1),k("span",{class:E(n(-t.value,-10*o(f).SECOND))},"."+g(o(a).ms),3)]))}}),ve=de(ia,[["__scopeId","data-v-2dccf777"]]),da={key:0,class:"break"},ca={key:2,class:"unknown-round"},ma=R({__name:"Round",props:{value:{},index:{default:null}},setup(e){const t=e,a=T(()=>{var u;return(u=t.value)==null?void 0:u.cn}),n=T(()=>t.index?t.index%2===1:!1);return(u,r)=>o(a)==o(ae).BREAK?(V(),A("div",da,[k("pre",null,g(o(a))+": "+g(t.value),1)])):o(a)==o(ae).LEVEL?(V(),A("div",{key:1,class:E(["level",o(n)?"level-even":"level-odd"])},[k("pre",null,g(o(a))+": "+g(t.value),1),k("pre",null,"isEven: "+g(o(n)),1)],2)):(V(),A("div",ca,r[0]||(r[0]=[k("pre",null,"Unknown round type",-1)])))}});class va{read(t){const a=localStorage.getItem(t);return a?Je.from(a):null}write(t,a){localStorage.setItem(t,JSON.stringify(a))}}const fa=Re("tournament",()=>{const e=I(null),t=new va;let a="default";const n=r=>{const s=t.read(r);a=r,s?e.value=s:e.value=Qe.theBigGame()},u=r=>{t.write(r,e.value)};return J(e,()=>{u(a)},{deep:!0}),{tournament:e,loadTournament:n,saveTournament:u}}),fe=D()({name:"VCardActions",props:F(),setup(e,t){let{slots:a}=t;return Fe({VBtn:{slim:!0,variant:"text"}}),L(()=>{var n;return l("div",{class:["v-card-actions",e.class],style:e.style},[(n=a.default)==null?void 0:n.call(a)])}),{}}}),pa=O({opacity:[Number,String],...F(),...W()},"VCardSubtitle"),ga=D()({name:"VCardSubtitle",props:pa(),setup(e,t){let{slots:a}=t;return L(()=>l(e.tag,{class:["v-card-subtitle",e.class],style:[{"--v-card-subtitle-opacity":e.opacity},e.style]},a)),{}}}),pe=ce("v-card-title"),ya=O({appendAvatar:String,appendIcon:$,prependAvatar:String,prependIcon:$,subtitle:[String,Number],title:[String,Number],...F(),...le()},"VCardItem"),ka=D()({name:"VCardItem",props:ya(),setup(e,t){let{slots:a}=t;return L(()=>{var S;const n=!!(e.prependAvatar||e.prependIcon),u=!!(n||a.prepend),r=!!(e.appendAvatar||e.appendIcon),s=!!(r||a.append),d=!!(e.title!=null||a.title),c=!!(e.subtitle!=null||a.subtitle);return l("div",{class:["v-card-item",e.class],style:e.style},[u&&l("div",{key:"prepend",class:"v-card-item__prepend"},[a.prepend?l(H,{key:"prepend-defaults",disabled:!n,defaults:{VAvatar:{density:e.density,image:e.prependAvatar},VIcon:{density:e.density,icon:e.prependIcon}}},a.prepend):l(j,null,[e.prependAvatar&&l(te,{key:"prepend-avatar",density:e.density,image:e.prependAvatar},null),e.prependIcon&&l(K,{key:"prepend-icon",density:e.density,icon:e.prependIcon},null)])]),l("div",{class:"v-card-item__content"},[d&&l(pe,{key:"title"},{default:()=>{var i;return[((i=a.title)==null?void 0:i.call(a))??e.title]}}),c&&l(ga,{key:"subtitle"},{default:()=>{var i;return[((i=a.subtitle)==null?void 0:i.call(a))??e.subtitle]}}),(S=a.default)==null?void 0:S.call(a)]),s&&l("div",{key:"append",class:"v-card-item__append"},[a.append?l(H,{key:"append-defaults",disabled:!r,defaults:{VAvatar:{density:e.density,image:e.appendAvatar},VIcon:{density:e.density,icon:e.appendIcon}}},a.append):l(j,null,[e.appendIcon&&l(K,{key:"append-icon",density:e.density,icon:e.appendIcon},null),e.appendAvatar&&l(te,{key:"append-avatar",density:e.density,image:e.appendAvatar},null)])])])}),{}}}),Sa=O({opacity:[Number,String],...F(),...W()},"VCardText"),ge=D()({name:"VCardText",props:Sa(),setup(e,t){let{slots:a}=t;return L(()=>l(e.tag,{class:["v-card-text",e.class],style:[{"--v-card-text-opacity":e.opacity},e.style]},a)),{}}}),Ca=O({appendAvatar:String,appendIcon:$,disabled:Boolean,flat:Boolean,hover:Boolean,image:String,link:{type:Boolean,default:void 0},prependAvatar:String,prependIcon:$,ripple:{type:[Boolean,Object],default:!0},subtitle:[String,Number],text:[String,Number],title:[String,Number],...aa(),...F(),...le(),...Oe(),...ta(),...be(),..._e(),...Ve(),...na(),...he(),...W(),...Me(),...Ae({variant:"elevated"})},"VCard"),ye=D()({name:"VCard",directives:{Ripple:Te},props:Ca(),setup(e,t){let{attrs:a,slots:n}=t;const{themeClasses:u}=Ue(e),{borderClasses:r}=la(e),{colorClasses:s,colorStyles:d,variantClasses:c}=we(e),{densityClasses:S}=Ie(e),{dimensionStyles:i}=qe(e),{elevationClasses:y}=sa(e),{loaderClasses:p}=xe(e),{locationStyles:m}=Pe(e),{positionClasses:b}=Ee(e),{roundedClasses:v}=oa(e),C=De(e,a),x=T(()=>e.link!==!1&&C.isLink.value),h=T(()=>!e.disabled&&e.link!==!1&&(e.link||C.isClickable.value));return L(()=>{const P=x.value?"a":e.tag,Y=!!(n.title||e.title!=null),G=!!(n.subtitle||e.subtitle!=null),M=Y||G,U=!!(n.append||e.appendAvatar||e.appendIcon),q=!!(n.prepend||e.prependAvatar||e.prependIcon),ke=!!(n.image||e.image),Se=M||q||U,Ce=!!(n.text||e.text!=null);return Q(l(P,N({class:["v-card",{"v-card--disabled":e.disabled,"v-card--flat":e.flat,"v-card--hover":e.hover&&!(e.disabled||e.flat),"v-card--link":h.value},u.value,r.value,s.value,S.value,y.value,p.value,b.value,v.value,c.value,e.class],style:[d.value,i.value,m.value,e.style],onClick:h.value&&C.navigate,tabindex:e.disabled?-1:void 0},C.linkProps),{default:()=>{var X;return[ke&&l("div",{key:"image",class:"v-card__image"},[n.image?l(H,{key:"image-defaults",disabled:!e.image,defaults:{VImg:{cover:!0,src:e.image}}},n.image):l(We,{key:"image-img",cover:!0,src:e.image},null)]),l(Le,{name:"v-card",active:!!e.loading,color:typeof e.loading=="boolean"?void 0:e.loading},{default:n.loader}),Se&&l(ka,{key:"item",prependAvatar:e.prependAvatar,prependIcon:e.prependIcon,title:e.title,subtitle:e.subtitle,appendAvatar:e.appendAvatar,appendIcon:e.appendIcon},{default:n.item,prepend:n.prepend,title:n.title,subtitle:n.subtitle,append:n.append}),Ce&&l(ge,{key:"text"},{default:()=>{var Z;return[((Z=n.text)==null?void 0:Z.call(n))??e.text]}}),(X=n.default)==null?void 0:X.call(n),n.actions&&l(fe,null,{default:n.actions}),Ne(h.value,"v-card")]}}),[[ze("ripple"),h.value&&e.ripple]])}),{}}}),ba={class:"text-h1 text-center"},_a=R({__name:"Tournament",setup(e){const t=oe(),a="id"in t.params?t.params.id:"Random",n=t.query.tournamentName,u=me(),r=fa(),s=T(()=>r.tournament),d=I(null),c=I(null),S=()=>{c.value&&cancelAnimationFrame(c.value),c.value=requestAnimationFrame(y)},i=()=>{c.value&&cancelAnimationFrame(c.value),c.value=null},y=()=>{try{r.tournament&&(d.value=r.tournament.getState()),c.value=requestAnimationFrame(y)}catch(h){console.debug("Err handler in updateTimer",h),i()}},p=T(()=>d.value?s.value.getRound(d.value.roundIndex):null),m=T(()=>d.value&&p.value?p.value.getDuration()-d.value.roundCountdown:0);function b(){s.value.isPaused()?(s.value.continue(),S()):(s.value.pause(),i())}function v(){s.value.adjustTime(-u.fastForwardDuration),d.value=s.value.getState()}function C(){s.value.adjustTime(u.fastBackwardDuration),d.value=s.value.getState()}function x(h){switch(h.code){case"ArrowLeft":v();break;case"ArrowRight":C();break;case"Space":b(),h.preventDefault();break}}return re(()=>{r.loadTournament(a),S(),window.addEventListener("keydown",x)}),ue(()=>{i(),window.removeEventListener("keydown",x)}),(h,P)=>{var M;const Y=ma,G=ve;return V(),A(j,null,[k("p",null,"Tournament ID: "+g(o(a)),1),k("p",null,"Tournament Name: "+g(o(n)),1),k("p",null,"State: "+g(o(d)),1),l(Y,{index:((M=o(d))==null?void 0:M.roundIndex)??null,value:o(p)},null,8,["index","value"]),o(d)?(V(),ie(ye,{key:0,ref:"cardContainer",elevation:"16",tabindex:"0",title:"Countdown Timer"},{default:_(()=>{var U,q;return[k("h1",ba,[l(G,{value:(U=o(d))==null?void 0:U.roundCountdown},null,8,["value"])]),l(w,{icon:"mdi-skip-previous",size:"small"}),l(w,{color:"green",icon:"mdi-rewind",size:"small",onClick:v}),l(w,{color:"primary",icon:"",onClick:b},{default:_(()=>[Q(l(K,null,{default:_(()=>P[0]||(P[0]=[B(g("mdi-play"))])),_:1},512),[[ee,o(s).isPaused()]]),Q(l(K,null,{default:_(()=>P[1]||(P[1]=[B(g("mdi-pause"))])),_:1},512),[[ee,!o(s).isPaused()]])]),_:1}),l(w,{color:"green",icon:"mdi-fast-forward",size:"small",onClick:C}),l(w,{icon:"mdi-skip-next",size:"small"}),l(se,{max:(q=o(p))==null?void 0:q.getDuration(),"model-value":o(m)},null,8,["max","model-value"])]}),_:1},512)):z("",!0)],64)}}}),Va=de(_a,[["__scopeId","data-v-d0088337"]]),ha=O({fullscreen:Boolean,retainFocus:{type:Boolean,default:!0},scrollable:Boolean,...Xe({origin:"center center",scrollStrategy:"block",transition:{component:Ze},zIndex:2400})},"VDialog"),Aa=D()({name:"VDialog",props:ha(),emits:{"update:modelValue":e=>!0,afterEnter:()=>!0,afterLeave:()=>!0},setup(e,t){let{emit:a,slots:n}=t;const u=He(e,"modelValue"),{scopeId:r}=ea(),s=I();function d(i){var m,b;const y=i.relatedTarget,p=i.target;if(y!==p&&((m=s.value)!=null&&m.contentEl)&&((b=s.value)!=null&&b.globalTop)&&![document,s.value.contentEl].includes(p)&&!s.value.contentEl.contains(p)){const v=Ke(s.value.contentEl);if(!v.length)return;const C=v[0],x=v[v.length-1];y===C?x.focus():C.focus()}}$e&&J(()=>u.value&&e.retainFocus,i=>{i?document.addEventListener("focusin",d):document.removeEventListener("focusin",d)},{immediate:!0});function c(){var i;a("afterEnter"),(i=s.value)!=null&&i.contentEl&&!s.value.contentEl.contains(document.activeElement)&&s.value.contentEl.focus({preventScroll:!0})}function S(){a("afterLeave")}return J(u,async i=>{var y;i||(await je(),(y=s.value.activatorEl)==null||y.focus({preventScroll:!0}))}),L(()=>{const i=ne.filterProps(e),y=N({"aria-haspopup":"dialog"},e.activatorProps),p=N({tabindex:-1},e.contentProps);return l(ne,N({ref:s,class:["v-dialog",{"v-dialog--fullscreen":e.fullscreen,"v-dialog--scrollable":e.scrollable},e.class],style:e.style},i,{modelValue:u.value,"onUpdate:modelValue":m=>u.value=m,"aria-modal":"true",activatorProps:y,contentProps:p,role:"dialog",onAfterEnter:c,onAfterLeave:S},r),{activator:n.activator,default:function(){for(var m=arguments.length,b=new Array(m),v=0;v<m;v++)b[v]=arguments[v];return l(H,{root:"VDialog"},{default:()=>{var C;return[(C=n.default)==null?void 0:C.call(n,...b)]}})}})}),Be({},s)}}),Ta=R({__name:"ShotClock",setup(e){const a=me().app.get("shotClock")??30*f.SECOND,n=I(null),u=I(a),r=I(null),s=I(!1),d=T(()=>a-u.value),c=()=>{const p=performance.now();u.value=Math.max(0,(n.value??0)-p),u.value>0?r.value=requestAnimationFrame(c):r.value&&(cancelAnimationFrame(r.value),r.value=null)},S=()=>{u.value=a,n.value=performance.now()+a,r.value&&cancelAnimationFrame(r.value),r.value=requestAnimationFrame(c)},i=()=>{r.value&&cancelAnimationFrame(r.value),u.value=a},y=p=>{p.code==="KeyS"&&(s.value=!s.value)};return re(()=>{window.addEventListener("keydown",y)}),ue(()=>{window.removeEventListener("keydown",y),r.value&&cancelAnimationFrame(r.value)}),(p,m)=>{const b=ve;return V(),ie(Aa,{modelValue:o(s),"onUpdate:modelValue":m[1]||(m[1]=v=>Ye(s)?s.value=v:null),"max-width":"500",onAfterEnter:S,onAfterLeave:i},{activator:_(({props:v})=>[l(w,N(v,{color:"surface-variant",variant:"flat"}),{default:_(()=>m[2]||(m[2]=[B(" Request a Shot Clock ")])),_:2},1040)]),default:_(()=>[l(ye,null,{default:_(()=>[l(pe,null,{default:_(()=>m[3]||(m[3]=[B("Shot Clock")])),_:1}),l(ge,{class:"text-h1 text-center"},{default:_(()=>[l(b,{"show-hours":!1,"show-minutes":o(a)>=o(f).MINUTE,value:o(u)},null,8,["show-minutes","value"])]),_:1}),l(se,{max:o(a),"model-value":o(d)},null,8,["max","model-value"]),l(fe,null,{default:_(()=>[l(ra),l(w,{text:"Close",onClick:m[0]||(m[0]=v=>s.value=!1)})]),_:1})]),_:1})]),_:1},8,["modelValue"])}}}),La=R({__name:"[id]",setup(e){const t=Ge(),a=oe(),n="id"in a.params?a.params.id:void 0;function u(){t.go(-1)}return(r,s)=>{const d=Ta,c=Va;return V(),A(j,null,[k("p",null,'Tournament ID is: "'+g(o(n))+'"',1),l(w,{onClick:u},{default:_(()=>s[0]||(s[0]=[B("Back")])),_:1}),l(d),s[1]||(s[1]=k("hr",null,null,-1)),l(c),s[2]||(s[2]=k("hr",null,null,-1))],64)}}});export{La as default};
