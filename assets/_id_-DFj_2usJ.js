import{T as f,m as se,k as H,o as _e,t as he,v as Ve,f as Ae,b as we,R as Te,g as Ie,u as xe,p as Pe,w as Ee,x as De,i as Le,L as Ne,j as Be,a as T,y as oe,l as Re}from"./index-C66E0o2O.js";import{l as R,e as w,o as h,v as A,L as o,aL as E,A as g,aM as z,y as k,aN as Fe,r as I,ac as Q,g as D,m as F,U as Oe,h as L,i as l,p as O,b as X,Q as $,F as j,D as Me,c as Ue,d as qe,G as ze,a3 as W,a4 as He,X as N,aO as re,at as ue,ah as ie,n as de,q as _,aA as J,af as ae,z as B,R as $e,ab as je,Z as Ke,ad as Ye,M as Ge,K as Je}from"./index-Beozyjld.js";import{_ as ce}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{c as te,T as Qe,p as We}from"./VGrid-DUdYdMfL.js";import{c as me,V as ne,f as Xe,e as ve,m as Ze,a as ea,u as aa,d as le}from"./VOverlay-BrZy3cYR.js";import{V as K,m as ta,a as na,b as la,c as sa,d as oa,e as ra}from"./VIcon-CUd8fBy2.js";const ua=me("v-spacer","div","VSpacer"),ia={class:"timer"},da=R({__name:"Timer",props:{value:{default:0},showDays:{type:Boolean,default:!1},showHours:{type:Boolean,default:!0},showMinutes:{type:Boolean,default:!0}},setup(e){const t=e,a=w(()=>{const u=10*f.SECOND,r=t.value?t.value/f.DAY|0:0,s=t.value?t.value%f.DAY/f.HOUR|0:0,d=t.value?t.value%f.HOUR/f.MINUTE|0:0,c=t.value?t.value%f.MINUTE/f.SECOND|0:0,S=t.value&&t.value<u?t.value%f.SECOND/100|0:0;return{dd:r.toLocaleString(void 0,{style:"unit",unitDisplay:"narrow",unit:"day"}),hh:s.toString().padStart(2,"0"),mm:d.toString().padStart(2,"0"),ss:c.toString().padStart(2,"0"),ms:S.toString()}});function n(u,r){return u<r?"fade-effect":"unfade-effect"}return(u,r)=>(h(),A("div",ia,[u.showDays||t.value>=o(f).DAY?(h(),A("span",{key:0,class:E(n(t.value,o(f).DAY))},g(o(a).dd)+"Â ",3)):z("",!0),u.showHours||t.value>=o(f).HOUR?(h(),A("span",{key:1,class:E(n(t.value,o(f).HOUR))},g(o(a).hh)+":",3)):z("",!0),u.showMinutes||t.value>=o(f).MINUTE?(h(),A("span",{key:2,class:E(n(t.value,10*o(f).SECOND))},g(o(a).mm)+":",3)):z("",!0),k("span",{class:E(n(t.value,10*o(f).SECOND))},g(o(a).ss[0]),3),k("span",null,g(o(a).ss[1]),1),k("span",{class:E(n(-t.value,-10*o(f).SECOND))},"."+g(o(a).ms),3)]))}}),fe=ce(da,[["__scopeId","data-v-2dccf777"]]),ca={key:0,class:"break"},ma={key:2,class:"unknown-round"},va=R({__name:"Round",props:{value:{},index:{default:null}},setup(e){const t=e,a=w(()=>{var u;return(u=t.value)==null?void 0:u.cn}),n=w(()=>t.index?t.index%2===1:!1);return(u,r)=>o(a)==o(te).BREAK?(h(),A("div",ca,[k("pre",null,g(o(a))+": "+g(t.value),1)])):o(a)==o(te).LEVEL?(h(),A("div",{key:1,class:E(["level",o(n)?"level-even":"level-odd"])},[k("pre",null,g(o(a))+": "+g(t.value),1),k("pre",null,"isEven: "+g(o(n)),1)],2)):(h(),A("div",ma,r[0]||(r[0]=[k("pre",null,"Unknown round type",-1)])))}});class fa{read(t){const a=localStorage.getItem(t);return a?Qe.from(a):null}write(t,a){localStorage.setItem(t,JSON.stringify(a))}}const pa=Fe("tournament",()=>{const e=I(null),t=new fa;let a="default";const n=r=>{const s=t.read(r);a=r,s?e.value=s:e.value=We.theBigGame()},u=r=>{t.write(r,e.value)};return Q(e,()=>{u(a)},{deep:!0}),{tournament:e,loadTournament:n,saveTournament:u}}),pe=D()({name:"VCardActions",props:F(),setup(e,t){let{slots:a}=t;return Oe({VBtn:{slim:!0,variant:"text"}}),L(()=>{var n;return l("div",{class:["v-card-actions",e.class],style:e.style},[(n=a.default)==null?void 0:n.call(a)])}),{}}}),ga=O({opacity:[Number,String],...F(),...X()},"VCardSubtitle"),ya=D()({name:"VCardSubtitle",props:ga(),setup(e,t){let{slots:a}=t;return L(()=>l(e.tag,{class:["v-card-subtitle",e.class],style:[{"--v-card-subtitle-opacity":e.opacity},e.style]},a)),{}}}),ge=me("v-card-title"),ka=O({appendAvatar:String,appendIcon:$,prependAvatar:String,prependIcon:$,subtitle:[String,Number],title:[String,Number],...F(),...se()},"VCardItem"),Sa=D()({name:"VCardItem",props:ka(),setup(e,t){let{slots:a}=t;return L(()=>{var S;const n=!!(e.prependAvatar||e.prependIcon),u=!!(n||a.prepend),r=!!(e.appendAvatar||e.appendIcon),s=!!(r||a.append),d=!!(e.title!=null||a.title),c=!!(e.subtitle!=null||a.subtitle);return l("div",{class:["v-card-item",e.class],style:e.style},[u&&l("div",{key:"prepend",class:"v-card-item__prepend"},[a.prepend?l(H,{key:"prepend-defaults",disabled:!n,defaults:{VAvatar:{density:e.density,image:e.prependAvatar},VIcon:{density:e.density,icon:e.prependIcon}}},a.prepend):l(j,null,[e.prependAvatar&&l(ne,{key:"prepend-avatar",density:e.density,image:e.prependAvatar},null),e.prependIcon&&l(K,{key:"prepend-icon",density:e.density,icon:e.prependIcon},null)])]),l("div",{class:"v-card-item__content"},[d&&l(ge,{key:"title"},{default:()=>{var i;return[((i=a.title)==null?void 0:i.call(a))??e.title]}}),c&&l(ya,{key:"subtitle"},{default:()=>{var i;return[((i=a.subtitle)==null?void 0:i.call(a))??e.subtitle]}}),(S=a.default)==null?void 0:S.call(a)]),s&&l("div",{key:"append",class:"v-card-item__append"},[a.append?l(H,{key:"append-defaults",disabled:!r,defaults:{VAvatar:{density:e.density,image:e.appendAvatar},VIcon:{density:e.density,icon:e.appendIcon}}},a.append):l(j,null,[e.appendIcon&&l(K,{key:"append-icon",density:e.density,icon:e.appendIcon},null),e.appendAvatar&&l(ne,{key:"append-avatar",density:e.density,image:e.appendAvatar},null)])])])}),{}}}),Ca=O({opacity:[Number,String],...F(),...X()},"VCardText"),ye=D()({name:"VCardText",props:Ca(),setup(e,t){let{slots:a}=t;return L(()=>l(e.tag,{class:["v-card-text",e.class],style:[{"--v-card-text-opacity":e.opacity},e.style]},a)),{}}}),ba=O({appendAvatar:String,appendIcon:$,disabled:Boolean,flat:Boolean,hover:Boolean,image:String,link:{type:Boolean,default:void 0},prependAvatar:String,prependIcon:$,ripple:{type:[Boolean,Object],default:!0},subtitle:[String,Number],text:[String,Number],title:[String,Number],...ta(),...F(),...se(),...Me(),...na(),..._e(),...he(),...Ve(),...la(),...Ae(),...X(),...Ue(),...we({variant:"elevated"})},"VCard"),ke=D()({name:"VCard",directives:{Ripple:Te},props:ba(),setup(e,t){let{attrs:a,slots:n}=t;const{themeClasses:u}=qe(e),{borderClasses:r}=sa(e),{colorClasses:s,colorStyles:d,variantClasses:c}=Ie(e),{densityClasses:S}=xe(e),{dimensionStyles:i}=ze(e),{elevationClasses:y}=oa(e),{loaderClasses:p}=Pe(e),{locationStyles:m}=Ee(e),{positionClasses:C}=De(e),{roundedClasses:v}=ra(e),b=Le(e,a),x=w(()=>e.link!==!1&&b.isLink.value),V=w(()=>!e.disabled&&e.link!==!1&&(e.link||b.isClickable.value));return L(()=>{const P=x.value?"a":e.tag,Y=!!(n.title||e.title!=null),G=!!(n.subtitle||e.subtitle!=null),M=Y||G,U=!!(n.append||e.appendAvatar||e.appendIcon),q=!!(n.prepend||e.prependAvatar||e.prependIcon),Se=!!(n.image||e.image),Ce=M||q||U,be=!!(n.text||e.text!=null);return W(l(P,N({class:["v-card",{"v-card--disabled":e.disabled,"v-card--flat":e.flat,"v-card--hover":e.hover&&!(e.disabled||e.flat),"v-card--link":V.value},u.value,r.value,s.value,S.value,y.value,p.value,C.value,v.value,c.value,e.class],style:[d.value,i.value,m.value,e.style],onClick:V.value&&b.navigate,tabindex:e.disabled?-1:void 0},b.linkProps),{default:()=>{var Z;return[Se&&l("div",{key:"image",class:"v-card__image"},[n.image?l(H,{key:"image-defaults",disabled:!e.image,defaults:{VImg:{cover:!0,src:e.image}}},n.image):l(Xe,{key:"image-img",cover:!0,src:e.image},null)]),l(Ne,{name:"v-card",active:!!e.loading,color:typeof e.loading=="boolean"?void 0:e.loading},{default:n.loader}),Ce&&l(Sa,{key:"item",prependAvatar:e.prependAvatar,prependIcon:e.prependIcon,title:e.title,subtitle:e.subtitle,appendAvatar:e.appendAvatar,appendIcon:e.appendIcon},{default:n.item,prepend:n.prepend,title:n.title,subtitle:n.subtitle,append:n.append}),be&&l(ye,{key:"text"},{default:()=>{var ee;return[((ee=n.text)==null?void 0:ee.call(n))??e.text]}}),(Z=n.default)==null?void 0:Z.call(n),n.actions&&l(pe,null,{default:n.actions}),Be(V.value,"v-card")]}}),[[He("ripple"),V.value&&e.ripple]])}),{}}}),_a={class:"text-h1 text-center"},ha=R({__name:"Tournament",setup(e){const t=re(),a="id"in t.params?t.params.id:"Random",n=t.query.tournamentName,u=ve(),r=pa(),s=w(()=>r.tournament),d=I(null),c=I(null),S=()=>{c.value&&cancelAnimationFrame(c.value),c.value=requestAnimationFrame(y)},i=()=>{c.value&&cancelAnimationFrame(c.value),c.value=null},y=()=>{try{r.tournament&&(d.value=r.tournament.getState()),c.value=requestAnimationFrame(y)}catch(V){console.debug("Err handler in updateTimer",V),i()}},p=w(()=>d.value?s.value.getRound(d.value.roundIndex):null),m=w(()=>d.value&&p.value?p.value.getDuration()-d.value.roundCountdown:0);function C(){s.value.isPaused()?(s.value.continue(),S()):(s.value.pause(),i())}function v(){s.value.adjustTime(-u.fastForwardDuration),d.value=s.value.getState()}function b(){s.value.adjustTime(u.fastBackwardDuration),d.value=s.value.getState()}function x(V){switch(V.code){case"ArrowLeft":v();break;case"ArrowRight":b();break;case"Space":C(),V.preventDefault();break}}return ue(()=>{r.loadTournament(a),S(),window.addEventListener("keydown",x)}),ie(()=>{i(),window.removeEventListener("keydown",x)}),(V,P)=>{var M;const Y=va,G=fe;return h(),A(j,null,[k("p",null,"Tournament ID: "+g(o(a)),1),k("p",null,"Tournament Name: "+g(o(n)),1),k("p",null,"State: "+g(o(d)),1),l(Y,{index:((M=o(d))==null?void 0:M.roundIndex)??null,value:o(p)},null,8,["index","value"]),o(d)?(h(),de(ke,{key:0,ref:"cardContainer",elevation:"16",tabindex:"0",title:"Countdown Timer",onClick:C},{default:_(()=>{var U,q;return[k("h1",_a,[l(G,{value:(U=o(d))==null?void 0:U.roundCountdown},null,8,["value"])]),l(T,{icon:"mdi-skip-previous",size:"small"}),l(T,{color:"green",icon:"mdi-rewind",size:"small",onClick:J(v,["stop"])}),l(T,{color:"primary",icon:"",onClick:J(C,["stop"])},{default:_(()=>[W(l(K,null,{default:_(()=>P[0]||(P[0]=[B(g("mdi-play"))])),_:1},512),[[ae,o(s).isPaused()]]),W(l(K,null,{default:_(()=>P[1]||(P[1]=[B(g("mdi-pause"))])),_:1},512),[[ae,!o(s).isPaused()]])]),_:1}),l(T,{color:"green",icon:"mdi-fast-forward",size:"small",onClick:J(b,["stop"])}),l(T,{icon:"mdi-skip-next",size:"small"}),l(oe,{max:(q=o(p))==null?void 0:q.getDuration(),"model-value":o(m)},null,8,["max","model-value"])]}),_:1},512)):z("",!0)],64)}}}),Va=ce(ha,[["__scopeId","data-v-6155d69d"]]),Aa=O({fullscreen:Boolean,retainFocus:{type:Boolean,default:!0},scrollable:Boolean,...Ze({origin:"center center",scrollStrategy:"block",transition:{component:ea},zIndex:2400})},"VDialog"),wa=D()({name:"VDialog",props:Aa(),emits:{"update:modelValue":e=>!0,afterEnter:()=>!0,afterLeave:()=>!0},setup(e,t){let{emit:a,slots:n}=t;const u=$e(e,"modelValue"),{scopeId:r}=aa(),s=I();function d(i){var m,C;const y=i.relatedTarget,p=i.target;if(y!==p&&((m=s.value)!=null&&m.contentEl)&&((C=s.value)!=null&&C.globalTop)&&![document,s.value.contentEl].includes(p)&&!s.value.contentEl.contains(p)){const v=Ye(s.value.contentEl);if(!v.length)return;const b=v[0],x=v[v.length-1];y===b?x.focus():b.focus()}}je&&Q(()=>u.value&&e.retainFocus,i=>{i?document.addEventListener("focusin",d):document.removeEventListener("focusin",d)},{immediate:!0});function c(){var i;a("afterEnter"),(i=s.value)!=null&&i.contentEl&&!s.value.contentEl.contains(document.activeElement)&&s.value.contentEl.focus({preventScroll:!0})}function S(){a("afterLeave")}return Q(u,async i=>{var y;i||(await Ke(),(y=s.value.activatorEl)==null||y.focus({preventScroll:!0}))}),L(()=>{const i=le.filterProps(e),y=N({"aria-haspopup":"dialog"},e.activatorProps),p=N({tabindex:-1},e.contentProps);return l(le,N({ref:s,class:["v-dialog",{"v-dialog--fullscreen":e.fullscreen,"v-dialog--scrollable":e.scrollable},e.class],style:e.style},i,{modelValue:u.value,"onUpdate:modelValue":m=>u.value=m,"aria-modal":"true",activatorProps:y,contentProps:p,role:"dialog",onAfterEnter:c,onAfterLeave:S},r),{activator:n.activator,default:function(){for(var m=arguments.length,C=new Array(m),v=0;v<m;v++)C[v]=arguments[v];return l(H,{root:"VDialog"},{default:()=>{var b;return[(b=n.default)==null?void 0:b.call(n,...C)]}})}})}),Re({},s)}}),Ta=R({__name:"ShotClock",setup(e){const a=ve().app.get("shotClock")??30*f.SECOND,n=I(null),u=I(a),r=I(null),s=I(!1),d=w(()=>a-u.value),c=()=>{const p=performance.now();u.value=Math.max(0,(n.value??0)-p),u.value>0?r.value=requestAnimationFrame(c):r.value&&(cancelAnimationFrame(r.value),r.value=null)},S=()=>{u.value=a,n.value=performance.now()+a,r.value&&cancelAnimationFrame(r.value),r.value=requestAnimationFrame(c)},i=()=>{r.value&&cancelAnimationFrame(r.value),u.value=a},y=p=>{p.code==="KeyS"&&(s.value=!s.value)};return ue(()=>{window.addEventListener("keydown",y)}),ie(()=>{window.removeEventListener("keydown",y),r.value&&cancelAnimationFrame(r.value)}),(p,m)=>{const C=fe;return h(),de(wa,{modelValue:o(s),"onUpdate:modelValue":m[1]||(m[1]=v=>Ge(s)?s.value=v:null),"max-width":"500",onAfterEnter:S,onAfterLeave:i},{activator:_(({props:v})=>[l(T,N(v,{color:"surface-variant",variant:"flat"}),{default:_(()=>m[2]||(m[2]=[B(" Request a Shot Clock ")])),_:2},1040)]),default:_(()=>[l(ke,null,{default:_(()=>[l(ge,null,{default:_(()=>m[3]||(m[3]=[B("Shot Clock")])),_:1}),l(ye,{class:"text-h1 text-center"},{default:_(()=>[l(C,{"show-hours":!1,"show-minutes":o(a)>=o(f).MINUTE,value:o(u)},null,8,["show-minutes","value"])]),_:1}),l(oe,{max:o(a),"model-value":o(d)},null,8,["max","model-value"]),l(pe,null,{default:_(()=>[l(ua),l(T,{text:"Close",onClick:m[0]||(m[0]=v=>s.value=!1)})]),_:1})]),_:1})]),_:1},8,["modelValue"])}}}),Na=R({__name:"[id]",setup(e){const t=Je(),a=re(),n="id"in a.params?a.params.id:void 0;function u(){t.go(-1)}return(r,s)=>{const d=Ta,c=Va;return h(),A(j,null,[k("p",null,'Tournament ID is: "'+g(o(n))+'"',1),l(T,{onClick:u},{default:_(()=>s[0]||(s[0]=[B("Back")])),_:1}),l(d),s[1]||(s[1]=k("hr",null,null,-1)),l(c),s[2]||(s[2]=k("hr",null,null,-1))],64)}}});export{Na as default};
