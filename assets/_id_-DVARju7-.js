import{T as f,m as ne,k as H,o as Ce,t as be,v as _e,f as he,b as Ve,R as Ae,g as Te,u as we,p as Ie,w as xe,x as Pe,i as Ee,L as De,j as Le,a as w,y as le,l as Ne}from"./index-CgjN2KfA.js";import{l as R,e as T,o as h,v as A,L as o,aL as E,A as g,aM as z,y as k,aN as Be,r as I,ac as J,g as D,m as F,U as Re,h as L,i as l,p as O,b as W,Q as $,F as j,D as Fe,c as Oe,d as Me,G as Ue,a3 as Q,a4 as qe,X as N,aO as se,at as oe,ah as re,n as ue,q as _,af as ee,z as B,R as ze,ab as He,Z as $e,ad as je,M as Ke,K as Ye}from"./index-Cgt8FsMp.js";import{_ as ie}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{c as de,V as ae,f as Ge,e as ce,m as Je,a as Qe,u as We,d as te}from"./VOverlay-DFaKN09U.js";import{T as Xe,p as Ze}from"./VGrid-BnyNLfLL.js";import{V as K,m as ea,a as aa,b as ta,c as na,d as la,e as sa}from"./VIcon-CHpwEsgl.js";const oa=de("v-spacer","div","VSpacer"),ra={class:"timer"},ua=R({__name:"Timer",props:{value:{default:0},showDays:{type:Boolean,default:!1},showHours:{type:Boolean,default:!0},showMinutes:{type:Boolean,default:!0}},setup(e){const t=e,a=T(()=>{const u=10*f.SECOND,r=t.value?t.value/f.DAY|0:0,s=t.value?t.value%f.DAY/f.HOUR|0:0,d=t.value?t.value%f.HOUR/f.MINUTE|0:0,c=t.value?t.value%f.MINUTE/f.SECOND|0:0,S=t.value&&t.value<u?t.value%f.SECOND/100|0:0;return{dd:r.toLocaleString(void 0,{style:"unit",unitDisplay:"narrow",unit:"day"}),hh:s.toString().padStart(2,"0"),mm:d.toString().padStart(2,"0"),ss:c.toString().padStart(2,"0"),ms:S.toString()}});function n(u,r){return u<r?"fade-effect":"unfade-effect"}return(u,r)=>(h(),A("div",ra,[u.showDays||t.value>=o(f).DAY?(h(),A("span",{key:0,class:E(n(t.value,o(f).DAY))},g(o(a).dd)+" ",3)):z("",!0),u.showHours||t.value>=o(f).HOUR?(h(),A("span",{key:1,class:E(n(t.value,o(f).HOUR))},g(o(a).hh)+":",3)):z("",!0),u.showMinutes||t.value>=o(f).MINUTE?(h(),A("span",{key:2,class:E(n(t.value,10*o(f).SECOND))},g(o(a).mm)+":",3)):z("",!0),k("span",{class:E(n(t.value,10*o(f).SECOND))},g(o(a).ss[0]),3),k("span",null,g(o(a).ss[1]),1),k("span",{class:E(n(-t.value,-10*o(f).SECOND))},"."+g(o(a).ms),3)]))}}),me=ie(ua,[["__scopeId","data-v-2dccf777"]]),ia={key:0,class:"break"},da={key:2,class:"unknown round"},ca=R({__name:"Round",props:{value:{},index:{default:null}},setup(e){const t=e,a=T(()=>{var u;return(u=t.value)==null?void 0:u.constructor.name}),n=T(()=>t.index?t.index%2===1:!1);return(u,r)=>o(a)=="Break"?(h(),A("div",ia,[k("pre",null,g(o(a))+": "+g(t.value),1)])):o(a)=="Level"?(h(),A("div",{key:1,class:E(["level",o(n)?"level-even":"level-odd"])},[k("pre",null,g(o(a))+": "+g(t.value),1),k("pre",null,"isEven: "+g(o(n)),1)],2)):(h(),A("div",da,r[0]||(r[0]=[k("pre",null,"херь какая-то",-1)])))}});class ma{read(t){const a=localStorage.getItem(t);return a?Xe.from(a):null}write(t,a){localStorage.setItem(t,JSON.stringify(a))}}const va=Be("tournament",()=>{const e=I(null),t=new ma;let a="default";const n=r=>{const s=t.read(r);a=r,s?e.value=s:e.value=Ze.theBigGame()},u=r=>{t.write(r,e.value)};return J(e,()=>{u(a)},{deep:!0}),{tournament:e,loadTournament:n,saveTournament:u}}),ve=D()({name:"VCardActions",props:F(),setup(e,t){let{slots:a}=t;return Re({VBtn:{slim:!0,variant:"text"}}),L(()=>{var n;return l("div",{class:["v-card-actions",e.class],style:e.style},[(n=a.default)==null?void 0:n.call(a)])}),{}}}),fa=O({opacity:[Number,String],...F(),...W()},"VCardSubtitle"),pa=D()({name:"VCardSubtitle",props:fa(),setup(e,t){let{slots:a}=t;return L(()=>l(e.tag,{class:["v-card-subtitle",e.class],style:[{"--v-card-subtitle-opacity":e.opacity},e.style]},a)),{}}}),fe=de("v-card-title"),ga=O({appendAvatar:String,appendIcon:$,prependAvatar:String,prependIcon:$,subtitle:[String,Number],title:[String,Number],...F(),...ne()},"VCardItem"),ya=D()({name:"VCardItem",props:ga(),setup(e,t){let{slots:a}=t;return L(()=>{var S;const n=!!(e.prependAvatar||e.prependIcon),u=!!(n||a.prepend),r=!!(e.appendAvatar||e.appendIcon),s=!!(r||a.append),d=!!(e.title!=null||a.title),c=!!(e.subtitle!=null||a.subtitle);return l("div",{class:["v-card-item",e.class],style:e.style},[u&&l("div",{key:"prepend",class:"v-card-item__prepend"},[a.prepend?l(H,{key:"prepend-defaults",disabled:!n,defaults:{VAvatar:{density:e.density,image:e.prependAvatar},VIcon:{density:e.density,icon:e.prependIcon}}},a.prepend):l(j,null,[e.prependAvatar&&l(ae,{key:"prepend-avatar",density:e.density,image:e.prependAvatar},null),e.prependIcon&&l(K,{key:"prepend-icon",density:e.density,icon:e.prependIcon},null)])]),l("div",{class:"v-card-item__content"},[d&&l(fe,{key:"title"},{default:()=>{var i;return[((i=a.title)==null?void 0:i.call(a))??e.title]}}),c&&l(pa,{key:"subtitle"},{default:()=>{var i;return[((i=a.subtitle)==null?void 0:i.call(a))??e.subtitle]}}),(S=a.default)==null?void 0:S.call(a)]),s&&l("div",{key:"append",class:"v-card-item__append"},[a.append?l(H,{key:"append-defaults",disabled:!r,defaults:{VAvatar:{density:e.density,image:e.appendAvatar},VIcon:{density:e.density,icon:e.appendIcon}}},a.append):l(j,null,[e.appendIcon&&l(K,{key:"append-icon",density:e.density,icon:e.appendIcon},null),e.appendAvatar&&l(ae,{key:"append-avatar",density:e.density,image:e.appendAvatar},null)])])])}),{}}}),ka=O({opacity:[Number,String],...F(),...W()},"VCardText"),pe=D()({name:"VCardText",props:ka(),setup(e,t){let{slots:a}=t;return L(()=>l(e.tag,{class:["v-card-text",e.class],style:[{"--v-card-text-opacity":e.opacity},e.style]},a)),{}}}),Sa=O({appendAvatar:String,appendIcon:$,disabled:Boolean,flat:Boolean,hover:Boolean,image:String,link:{type:Boolean,default:void 0},prependAvatar:String,prependIcon:$,ripple:{type:[Boolean,Object],default:!0},subtitle:[String,Number],text:[String,Number],title:[String,Number],...ea(),...F(),...ne(),...Fe(),...aa(),...Ce(),...be(),..._e(),...ta(),...he(),...W(),...Oe(),...Ve({variant:"elevated"})},"VCard"),ge=D()({name:"VCard",directives:{Ripple:Ae},props:Sa(),setup(e,t){let{attrs:a,slots:n}=t;const{themeClasses:u}=Me(e),{borderClasses:r}=na(e),{colorClasses:s,colorStyles:d,variantClasses:c}=Te(e),{densityClasses:S}=we(e),{dimensionStyles:i}=Ue(e),{elevationClasses:y}=la(e),{loaderClasses:p}=Ie(e),{locationStyles:m}=xe(e),{positionClasses:b}=Pe(e),{roundedClasses:v}=sa(e),C=Ee(e,a),x=T(()=>e.link!==!1&&C.isLink.value),V=T(()=>!e.disabled&&e.link!==!1&&(e.link||C.isClickable.value));return L(()=>{const P=x.value?"a":e.tag,Y=!!(n.title||e.title!=null),G=!!(n.subtitle||e.subtitle!=null),M=Y||G,U=!!(n.append||e.appendAvatar||e.appendIcon),q=!!(n.prepend||e.prependAvatar||e.prependIcon),ye=!!(n.image||e.image),ke=M||q||U,Se=!!(n.text||e.text!=null);return Q(l(P,N({class:["v-card",{"v-card--disabled":e.disabled,"v-card--flat":e.flat,"v-card--hover":e.hover&&!(e.disabled||e.flat),"v-card--link":V.value},u.value,r.value,s.value,S.value,y.value,p.value,b.value,v.value,c.value,e.class],style:[d.value,i.value,m.value,e.style],onClick:V.value&&C.navigate,tabindex:e.disabled?-1:void 0},C.linkProps),{default:()=>{var X;return[ye&&l("div",{key:"image",class:"v-card__image"},[n.image?l(H,{key:"image-defaults",disabled:!e.image,defaults:{VImg:{cover:!0,src:e.image}}},n.image):l(Ge,{key:"image-img",cover:!0,src:e.image},null)]),l(De,{name:"v-card",active:!!e.loading,color:typeof e.loading=="boolean"?void 0:e.loading},{default:n.loader}),ke&&l(ya,{key:"item",prependAvatar:e.prependAvatar,prependIcon:e.prependIcon,title:e.title,subtitle:e.subtitle,appendAvatar:e.appendAvatar,appendIcon:e.appendIcon},{default:n.item,prepend:n.prepend,title:n.title,subtitle:n.subtitle,append:n.append}),Se&&l(pe,{key:"text"},{default:()=>{var Z;return[((Z=n.text)==null?void 0:Z.call(n))??e.text]}}),(X=n.default)==null?void 0:X.call(n),n.actions&&l(ve,null,{default:n.actions}),Le(V.value,"v-card")]}}),[[qe("ripple"),V.value&&e.ripple]])}),{}}}),Ca={class:"text-h1 text-center"},ba=R({__name:"Tournament",setup(e){const t=se(),a="id"in t.params?t.params.id:"Random",n=t.query.tournamentName,u=ce(),r=va(),s=T(()=>r.tournament),d=I(null),c=I(null),S=()=>{c.value&&cancelAnimationFrame(c.value),c.value=requestAnimationFrame(y)},i=()=>{c.value&&cancelAnimationFrame(c.value),c.value=null},y=()=>{try{r.tournament&&(d.value=r.tournament.getState()),c.value=requestAnimationFrame(y)}catch(V){console.debug("Err handler in updateTimer",V),i()}},p=T(()=>d.value?s.value.getRound(d.value.roundIndex):null),m=T(()=>d.value&&p.value?p.value.getDuration()-d.value.roundCountdown:0);function b(){s.value.isPaused()?(s.value.continue(),S()):(s.value.pause(),i())}function v(){s.value.adjustTime(-u.fastForwardDuration),d.value=s.value.getState()}function C(){s.value.adjustTime(u.fastBackwardDuration),d.value=s.value.getState()}function x(V){switch(V.code){case"ArrowLeft":v();break;case"ArrowRight":C();break;case"Space":b(),V.preventDefault();break}}return oe(()=>{r.loadTournament(a),S(),window.addEventListener("keydown",x)}),re(()=>{i(),window.removeEventListener("keydown",x)}),(V,P)=>{var M;const Y=ca,G=me;return h(),A(j,null,[k("p",null,"Tournament ID: "+g(o(a)),1),k("p",null,"Tournament Name: "+g(o(n)),1),k("p",null,"State: "+g(o(d)),1),l(Y,{index:((M=o(d))==null?void 0:M.roundIndex)??null,value:o(p)},null,8,["index","value"]),o(d)?(h(),ue(ge,{key:0,ref:"cardContainer",elevation:"16",tabindex:"0",title:"Countdown Timer"},{default:_(()=>{var U,q;return[k("h1",Ca,[l(G,{value:(U=o(d))==null?void 0:U.roundCountdown},null,8,["value"])]),l(w,{icon:"mdi-skip-previous",size:"small"}),l(w,{color:"green",icon:"mdi-rewind",size:"small",onClick:v}),l(w,{color:"primary",icon:"",onClick:b},{default:_(()=>[Q(l(K,null,{default:_(()=>P[0]||(P[0]=[B(g("mdi-play"))])),_:1},512),[[ee,o(s).isPaused()]]),Q(l(K,null,{default:_(()=>P[1]||(P[1]=[B(g("mdi-pause"))])),_:1},512),[[ee,!o(s).isPaused()]])]),_:1}),l(w,{color:"green",icon:"mdi-fast-forward",size:"small",onClick:C}),l(w,{icon:"mdi-skip-next",size:"small"}),l(le,{max:(q=o(p))==null?void 0:q.getDuration(),"model-value":o(m)},null,8,["max","model-value"])]}),_:1},512)):z("",!0)],64)}}}),_a=ie(ba,[["__scopeId","data-v-d0088337"]]),ha=O({fullscreen:Boolean,retainFocus:{type:Boolean,default:!0},scrollable:Boolean,...Je({origin:"center center",scrollStrategy:"block",transition:{component:Qe},zIndex:2400})},"VDialog"),Va=D()({name:"VDialog",props:ha(),emits:{"update:modelValue":e=>!0,afterEnter:()=>!0,afterLeave:()=>!0},setup(e,t){let{emit:a,slots:n}=t;const u=ze(e,"modelValue"),{scopeId:r}=We(),s=I();function d(i){var m,b;const y=i.relatedTarget,p=i.target;if(y!==p&&((m=s.value)!=null&&m.contentEl)&&((b=s.value)!=null&&b.globalTop)&&![document,s.value.contentEl].includes(p)&&!s.value.contentEl.contains(p)){const v=je(s.value.contentEl);if(!v.length)return;const C=v[0],x=v[v.length-1];y===C?x.focus():C.focus()}}He&&J(()=>u.value&&e.retainFocus,i=>{i?document.addEventListener("focusin",d):document.removeEventListener("focusin",d)},{immediate:!0});function c(){var i;a("afterEnter"),(i=s.value)!=null&&i.contentEl&&!s.value.contentEl.contains(document.activeElement)&&s.value.contentEl.focus({preventScroll:!0})}function S(){a("afterLeave")}return J(u,async i=>{var y;i||(await $e(),(y=s.value.activatorEl)==null||y.focus({preventScroll:!0}))}),L(()=>{const i=te.filterProps(e),y=N({"aria-haspopup":"dialog"},e.activatorProps),p=N({tabindex:-1},e.contentProps);return l(te,N({ref:s,class:["v-dialog",{"v-dialog--fullscreen":e.fullscreen,"v-dialog--scrollable":e.scrollable},e.class],style:e.style},i,{modelValue:u.value,"onUpdate:modelValue":m=>u.value=m,"aria-modal":"true",activatorProps:y,contentProps:p,role:"dialog",onAfterEnter:c,onAfterLeave:S},r),{activator:n.activator,default:function(){for(var m=arguments.length,b=new Array(m),v=0;v<m;v++)b[v]=arguments[v];return l(H,{root:"VDialog"},{default:()=>{var C;return[(C=n.default)==null?void 0:C.call(n,...b)]}})}})}),Ne({},s)}}),Aa=R({__name:"ShotClock",setup(e){const a=ce().app.get("shotClock")??30*f.SECOND,n=I(null),u=I(a),r=I(null),s=I(!1),d=T(()=>a-u.value),c=()=>{const p=performance.now();u.value=Math.max(0,(n.value??0)-p),u.value>0?r.value=requestAnimationFrame(c):r.value&&(cancelAnimationFrame(r.value),r.value=null)},S=()=>{u.value=a,n.value=performance.now()+a,r.value&&cancelAnimationFrame(r.value),r.value=requestAnimationFrame(c)},i=()=>{r.value&&cancelAnimationFrame(r.value),u.value=a},y=p=>{p.code==="KeyS"&&(s.value=!s.value)};return oe(()=>{window.addEventListener("keydown",y)}),re(()=>{window.removeEventListener("keydown",y),r.value&&cancelAnimationFrame(r.value)}),(p,m)=>{const b=me;return h(),ue(Va,{modelValue:o(s),"onUpdate:modelValue":m[1]||(m[1]=v=>Ke(s)?s.value=v:null),"max-width":"500",onAfterEnter:S,onAfterLeave:i},{activator:_(({props:v})=>[l(w,N(v,{color:"surface-variant",variant:"flat"}),{default:_(()=>m[2]||(m[2]=[B(" Request a Shot Clock ")])),_:2},1040)]),default:_(()=>[l(ge,null,{default:_(()=>[l(fe,null,{default:_(()=>m[3]||(m[3]=[B("Shot Clock")])),_:1}),l(pe,{class:"text-h1 text-center"},{default:_(()=>[l(b,{"show-hours":!1,"show-minutes":o(a)>=o(f).MINUTE,value:o(u)},null,8,["show-minutes","value"])]),_:1}),l(le,{max:o(a),"model-value":o(d)},null,8,["max","model-value"]),l(ve,null,{default:_(()=>[l(oa),l(w,{text:"Close",onClick:m[0]||(m[0]=v=>s.value=!1)})]),_:1})]),_:1})]),_:1},8,["modelValue"])}}}),Da=R({__name:"[id]",setup(e){const t=Ye(),a=se(),n="id"in a.params?a.params.id:void 0;function u(){t.go(-1)}return(r,s)=>{const d=Aa,c=_a;return h(),A(j,null,[k("p",null,'Tournament ID is: "'+g(o(n))+'"',1),l(w,{onClick:u},{default:_(()=>s[0]||(s[0]=[B("Back")])),_:1}),l(d),s[1]||(s[1]=k("hr",null,null,-1)),l(c),s[2]||(s[2]=k("hr",null,null,-1))],64)}}});export{Da as default};
